{
  "name": "NiftiVisualizationPiece",
  "description": "Standalone NIfTI visualization piece. Loads images directly from directories and creates a grid visualization with optional mask overlay.",
  "dependency": {
    "requirements_file": "requirements.txt"
  },
  "container_resources": {
    "cpu": 200,
    "memory": "512Mi"
  },
  "tags": [
    "Medical Imaging",
    "Visualization",
    "NIfTI",
    "MRI",
    "Segmentation"
  ],
  "style": {
    "node_label": "NIfTI Visualization",
    "node_type": "default",
    "node_style": {
      "backgroundColor": "#b3e0ff"
    },
    "useIcon": true,
    "icon_class_name": "fa-solid:image"
  },
  "input_schema": {
    "description": "NIfTI Visualization Piece Input Model\n\nStandalone piece that loads NIfTI files directly from directories\nand creates a grid visualization. No upstream connection required.",
    "properties": {
      "images_path": {
        "default": "/home/shared_storage/medical_data/images",
        "description": "Path to directory containing NIfTI image files (.nii.gz)",
        "title": "Images Path",
        "type": "string"
      },
      "masks_path": {
        "anyOf": [
          {"type": "string"},
          {"type": "null"}
        ],
        "default": "/home/shared_storage/medical_data/masks",
        "description": "Path to directory containing NIfTI mask files (.nii.gz). Optional.",
        "title": "Masks Path"
      },
      "file_pattern": {
        "default": "*.nii.gz",
        "description": "Glob pattern to match NIfTI files (e.g., '*.nii.gz')",
        "title": "File Pattern",
        "type": "string"
      },
      "max_subjects": {
        "default": 6,
        "description": "Maximum number of subjects to visualize",
        "maximum": 20,
        "minimum": 1,
        "title": "Max Subjects",
        "type": "integer"
      },
      "slice_index": {
        "anyOf": [
          {"type": "integer"},
          {"type": "null"}
        ],
        "default": null,
        "description": "Slice index to visualize. If None, uses middle slice.",
        "title": "Slice Index"
      },
      "view_plane": {
        "default": "axial",
        "description": "Anatomical plane to visualize",
        "enum": ["axial", "sagittal", "coronal"],
        "title": "View Plane",
        "type": "string"
      },
      "show_mask_overlay": {
        "default": true,
        "description": "Whether to overlay mask on image",
        "title": "Show Mask Overlay",
        "type": "boolean"
      },
      "mask_alpha": {
        "default": 0.5,
        "description": "Transparency of mask overlay (0.0 = transparent, 1.0 = opaque)",
        "maximum": 1.0,
        "minimum": 0.0,
        "title": "Mask Alpha",
        "type": "number"
      },
      "color_map": {
        "default": "gray",
        "description": "Matplotlib colormap for image (e.g., 'gray', 'viridis', 'bone')",
        "title": "Color Map",
        "type": "string"
      },
      "grid_columns": {
        "default": 3,
        "description": "Number of columns in visualization grid",
        "maximum": 10,
        "minimum": 1,
        "title": "Grid Columns",
        "type": "integer"
      }
    },
    "required": [],
    "title": "InputModel",
    "type": "object"
  },
  "output_schema": {
    "description": "NIfTI Visualization Piece Output Model",
    "properties": {
      "num_subjects": {
        "description": "Number of subjects visualized",
        "title": "Num Subjects",
        "type": "integer"
      },
      "subject_ids": {
        "description": "List of subject IDs that were visualized",
        "items": {"type": "string"},
        "title": "Subject Ids",
        "type": "array"
      },
      "view_plane": {
        "description": "Anatomical plane that was visualized",
        "title": "View Plane",
        "type": "string"
      },
      "grid_size": {
        "description": "Grid size (rows x columns)",
        "title": "Grid Size",
        "type": "string"
      },
      "visualization_summary": {
        "description": "Summary of visualization",
        "title": "Visualization Summary",
        "type": "string"
      }
    },
    "required": ["num_subjects", "subject_ids", "view_plane", "grid_size", "visualization_summary"],
    "title": "OutputModel",
    "type": "object"
  },
  "source_url": "https://github.com/patrikborzik2426/borzikpieces/tree/main/pieces/NiftiVisualizationPiece"
}
